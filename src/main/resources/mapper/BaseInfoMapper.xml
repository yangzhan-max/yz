<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="com.graduation.chen.stuems.dao.BaseInfoMapper">
    <resultMap id="BaseResultMap" type="com.graduation.chen.stuems.entity.BaseInfo">
        <id column="student_id" jdbcType="VARCHAR" property="studentId"/>
        <id column="resident_id" jdbcType="VARCHAR" property="residentId"/>
        <result column="password" jdbcType="VARCHAR" property="password"/>
        <result column="head_pic" jdbcType="VARCHAR" property="headPic"/>
        <result column="email" jdbcType="VARCHAR" property="email"/>
        <result column="phone" jdbcType="VARCHAR" property="phone"/>
    </resultMap>
    <!--根据学号查询用户密码-->
    <select id="selectPasswordByStudentId" parameterType="java.lang.String" resultType="java.lang.String">
        select password
        from base_info
        where student_id = #{studentId,jdbcType=VARCHAR}
    </select>
    <!--根据学号查询密码和邮箱-->
    <select id="selectPasswordAndEmailByStudentId" parameterType="java.lang.String"
            resultMap="BaseResultMap">
        select password, email
        from base_info
        where student_id = #{studentId,jdbcType=VARCHAR}
    </select>
    <!--根据学号查询邮箱-->
    <select id="selectEmailByStudentId" parameterType="java.lang.String"
            resultType="java.lang.String">
        select email
        from base_info
        where student_id = #{studentId,jdbcType=VARCHAR}
    </select>
    <!--查询所有基本信息根据学号-->
    <select id="selectAllByStudentIdInBase" parameterType="java.lang.String"
            resultMap="BaseResultMap">
        select student_id, email, password, phone, head_pic
        from base_info
        where student_id = #{studentId,jdbcType=VARCHAR}
    </select>
    <!--更新密码-->
    <update id="updatePassword" parameterType="java.lang.String">
        update base_info
        set password =#{password,jdbcType=VARCHAR}
        where student_id = #{studentId,jdbcType=VARCHAR}
    </update>
    <!--更改邮箱-->
    <update id="updateEmail" parameterType="java.lang.String">
        update base_info
        set email=#{newEmail,jdbcType=VARCHAR}
        where student_id = #{studentId,jdbcType=VARCHAR}
    </update>
    <!--更新头像-->
    <update id="updatePicByStudentId" parameterType="java.lang.String">
        update base_info
        set head_pic=#{headPicPath,jdbcType=VARCHAR}
        where student_id = #{studentId,jdbcType=VARCHAR}
    </update>

</mapper>