<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>教学评价</title>
    <!-- Standard -->
    <link rel="shortcut icon" href="/logo/logo_title.png">
    <!-- Styles -->
    <link href="assets/fontAwesome/css/fontawesome-all.min.css" rel="stylesheet">
    <link href="assets/css/lib/themify-icons.css" rel="stylesheet">
    <link href="assets/css/lib/mmc-chat.css" rel="stylesheet"/>
    <link href="assets/css/lib/sidebar.css" rel="stylesheet">
    <link href="assets/css/lib/bootstrap.min.css" rel="stylesheet">
    <link href="assets/css/lib/nixon.css" rel="stylesheet">
    <link href="assets/lib/lobipanel/css/lobipanel.min.css" rel="stylesheet">
    <link href="assets/css/style.css" rel="stylesheet">
    <link rel="stylesheet" href="layer/theme/default/layer.css">
</head>
<body>
<div class="panel-body">
    <table class="table table-responsive table-bordered ">
        <thead>
        <tr style="background: #FFF8DC;">
            <th>课程:软件工程、类型:讲课、周次:1-16周</th>
            <th>教师:张三</th>
        </tr>
        </thead>
        <tbody>
        <tr>
            <td colspan="2">教师教风</td>
        </tr>
        <tr>
            <td>老师着装整洁得体，优雅大方，教态自然。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions1"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions1"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions1"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions1"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        <tr>
            <td>老师对教学工作态度认真、热情、敬业，上课精神饱满。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions2"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions2"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions2"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tyOptions2"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        <tr>
            <td colspan="2">教学内容</td>
        </tr>
        <tr>
            <td>老师能够清晰地表述本节课程的目标和任务。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions1"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions1"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions1"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions1"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        <tr>
            <td>老师的授课准备充分，讲解清楚，连贯有序。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions2"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions2"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions2"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tcOptions2"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        <tr>
            <td colspan="2">教学过程</td>
        </tr>
        <tr>
            <td>老师在教学过程中，根据我们听课的实际情况，调动我们思考、发言。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions1"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions1"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions1"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions1"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        <tr>
            <td>老师引导我通过信息手段或到图书馆查阅资料等多种途径获取相关知识。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions2"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions2"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions2"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="tpOptions2"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        <tr>
            <td colspan="2">教学效果</td>
        </tr>
        <tr>
            <td>老师的教学增强了我分析问题、解决问题的能力。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions1"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions1"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions1"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions1"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        <tr>
            <td>我从这门课程所学到的东西比我的期望值高，使我受益匪浅。</td>
            <td>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions2"
                           value="100">
                    A.优秀
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions2"
                           value="80">
                    B.良好
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions2"
                           value="60">
                    C.及格
                </label>
                <label class="radio-inline">
                    <input type="radio"
                           name="teOptions2"
                           value="0">
                    D.不合格
                </label>
            </td>
        </tr>
        </tbody>
    </table>
    <button id="submit" type="button" class="btn btn-primary m-r-15 m-b-10"
            style="float: right;">提交
    </button>
</div>
<script src="assets/js/lib/jquery.min.js"></script>
<script src="assets/js/lib/jquery-ui/jquery-ui.min.js"></script>
<script src="assets/js/lib/jquery-ui/jquery.ui.touch-punch.min.js"></script>
<script src="assets/js/lib/bootstrap.min.js"></script>
<script src="assets/js/lib/lobi-panel/lobipanel.js"></script>
<script src="assets/js/lib/jquery.nanoscroller.min.js"></script>
<script src="assets/js/lib/sidebar.js"></script>
<script src="layer/layer.js"></script>
<script>
    let courseId = getUrlParam("courseId");
    let courseName;
    $(document).ready(function () {
        $.ajax({
            url: '/evaluate/show-detail?courseId=' + courseId,
            type: 'get',
            contentType: 'application/json;charset=UTF-8',
            success: function (res) {
                let data = res.data;
                courseName = data.course_name;
                let innerHTML = "课程:" + data.course_name + "&nbsp&nbsp类型:"
                    + data.course_type + "&nbsp&nbsp周次:" + data.course_cycle;
                $('thead').children("tr").children("th").eq(0).html(innerHTML);
                $('thead').children("tr").children("th").eq(1).html("教师:" + data.course_teacher);

                if (data.is_evaluate) {

                    $("input").attr("disabled", true);

                    $('#submit').attr("disabled", true)
                        .attr("class", "btn btn-default m-r-15 m-b-10")
                        .html("已评价");

                    let innerHTML = "<div  style=\"float: right;\">总分值：" + data.evaluate_score + "</div>";
                    $('#submit').before(innerHTML);
                }
            }
        })
    });

    $('#submit').click(function () {

        let array = ["tyOptions1", "tyOptions2", "tcOptions1", "tcOptions2",
            "tpOptions1", "tpOptions2", "teOptions1", "teOptions2"];

        let totalScore = 0;
        for (let i in array) {
            let currentScore = Number($("input[name='" + array[i] + "']:checked").val());
            totalScore += currentScore;
        }

        $.ajax({
            url: '/evaluate/up-ev',
            type: 'post',
            data: {
                courseName: courseName,
                evaluateScore: totalScore
            },
            success: function (res) {
                if (res.code === "201") {
                    layer.msg("成功评教该课程！");
                } else if (res.code === "202") {
                    layer.msg("评教失败，请重新试一次！");
                } else {
                    alert("出现未知错误！");
                }
            }
        })
    });

    function getUrlParam(name) {
        let reg = new RegExp("(^|&)" + name + "=([^&]*)(&|$)"); //构造一个含有目标参数的正则表达式对象
        let r = window.location.search.substr(1).match(reg);  //匹配目标参数
        if (r != null) return unescape(r[2]);
        return null; //返回参数值
    }
</script>
</body>
</html>